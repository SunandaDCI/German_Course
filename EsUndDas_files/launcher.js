(()=>{var e={879:e=>{self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ERROR_LIMIT:()=>n,reportError:()=>i});const n=10;let r=0,o=!1;const i=async e=>{var t;if(e.handled)return;if(!e.bypassErrorLimit&&r>=n){if(o)return;e.code="ERROR_LIMIT_EXCEEDED",o=!0}r++;const i=(1e7*Math.random()).toFixed(0).toString(),s=function(e,t){var n;const r=new URLSearchParams;return r.append("error_id",t),r.append("use_sandbox",(null===(n=e.useSandbox)||void 0===n?void 0:n.toString())||"false"),r.append("partner_origin",window.location.origin),r.append("rokt_tag_id",e.tagId||""),r.append("severity",e.severity||"WARNING"),r.append("reporter",e.reporter?`frame-${e.reporter}`:"frame"),e.code&&r.append("code",e.code),e.integration&&r.append("integration",e.integration),e.stack&&r.append("stack",e.stack.substring(0,400)),e.additionalInformation=Object.assign({name:e.name,message:e.message},e.additionalInformation),r.append("additional_information",JSON.stringify(e.additionalInformation)),r}(e,i),a=document.createElement("iframe");a.src=`https://apps.rokt.com/wsdk2/reporter/index.html?${s.toString()}`,a.style.display="none";const c=new Promise((e=>{const t=n=>{var r,o,s;"Rokt.Reporter.Close"!==(null===(r=n.data)||void 0===r?void 0:r.action)&&(null===(s=null===(o=n.data)||void 0===o?void 0:o.payload)||void 0===s?void 0:s.errorId)!==i||(e(),window.removeEventListener("message",t))};window.addEventListener("message",t)}));(window.document.body||window.document.head).appendChild(a),await c,null===(t=a.parentElement)||void 0===t||t.removeChild(a)};return t})()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";n.d(r,{default:()=>tt});var e=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},t=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},i=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(n){var r=function(e){return""!==e&&d.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]}),!1)}(n);if(!r)return null;var o=r[0],a=r[1];if("searchbot"===o)return new s;var f=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);f?f.length<l&&(f=e(e([],f,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(l-f.length),!0)):f=[];var m=f.join("."),p=function(e){for(var t=0,n=u.length;t<n;t++){var r=u[t],o=r[0];if(r[1].exec(e))return o}return null}(n),h=c.exec(n);return h&&h[1]?new i(o,m,p,h[1]):new t(o,m,p)}function m(e){return function(e){return e?f(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?f(navigator.userAgent):"undefined"!=typeof process&&process.version?new o(process.version.slice(1)):null}(e)}class p{constructor(){this.fulfilled=!1,this.rejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})).then((e=>(this.fulfilled=!0,e)),(e=>{throw this.rejected=!0,e}))}isFulfilled(){return this.fulfilled}isPending(){return!this.isFulfilled()&&!this.isRejected()}isRejected(){return this.rejected}static resolve(e){const t=new p;return t.resolve(e),t}}const h=(e=0)=>new Promise((t=>setTimeout(t,e))),E={BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED",CORE_LAUNCHER_TIMEOUT:"CORE_LAUNCHER_TIMEOUT",CORE_LAUNCHER_INITIALIZATION:"CORE_LAUNCHER_INITIALIZATION",CONTROLLER_INITIALIZATION:"CONTROLLER_INITIALIZATION",HASHING_FAILED:"HASHING_FAILED",INITIALIZATION_ERROR:"INITIALIZATION_ERROR",INTEGRATION_LAUNCHER_INITIALIZATION:"INTEGRATION_LAUNCHER_INITIALIZATION",LATE_CONTROLLER_INITIALIZATION:"LATE_CONTROLLER_INITIALIZATION",NO_ACCOUNT_ID:"NO_ACCOUNT_ID",NO_OPTIONS:"NO_OPTIONS",SECOND_INSTANCE:"SECOND_INSTANCE",SELECTION_MADE_FOR_CONVERSION:"SELECTION_MADE_FOR_CONVERSION",SIMULTANEOUS_SELECTION:"SIMULTANEOUS_SELECTION"},w="ERROR",O="INFO",y="WARNING";class g extends Error{constructor(e){var t,n;super(e.code),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.message=e.message||e.code||"",this.code=e.code,this.additionalInformation=e.additionalInformation,this.handled=null!==(n=e.handled)&&void 0!==n&&n,this.severity=e.severity||w,this.integration=e.integration,this.reporter=e.reporter,e.stack&&(this.stack=e.stack)}}const v={code:"UNKNOWN_ERROR",severity:w},I=()=>{const e={ROKT_COM_URL:"https://apps.rokt.com",DEMO_ROKT_COM_URL:"https://apps-demo.rokt.com",UPSELLS_TAG_IDS:"6240a06506ec42b38f5475f577e2e5d8,18f21499ab634e598a0029da04bc9ba3,93a61038b3dd4b0c905279e0fb7f9e36,d95d8b6d8662476e8648eb91fbb49fb7,4019a66f0590412ab5b2128fd5eddcf7,669f3e389da34e3a9c5314cd7406ae0d",UPSELLS_ACCOUNT_IDS:"227,253,280,249,250,244",UPSELLS_URIS:"checkout,spon,book"};return void 0===e?{ROKT_COM_URL:"",DEMO_ROKT_COM_URL:"",UPSELLS_TAG_IDS:"",UPSELLS_ACCOUNT_IDS:"",UPSELLS_URIS:""}:e},b="wsdk/plugins",N=I().ROKT_COM_URL,_={Widget:`${N}/${b}/widget/index.html`,DCUI:`${N}/${b}/dcui/index.html`,OL14:`${N}/${b}/offer-layout-14/index.html`,OL16:`${N}/${b}/offer-layout-16/index.html`},{UPSELLS_ACCOUNT_IDS:T,UPSELLS_TAG_IDS:R,UPSELLS_URIS:S}=I(),A=new Set([...T.split(","),...R.split(",")].filter(Boolean)),L=Object.values(S.split(",").filter(Boolean)),C=e=>t=>{const n=new URLSearchParams;n.append("integration_type","preload"),n.append("init_timestamp",String((new Date).getTime()));const r=n.toString(),o=e.document.createElement("iframe");o.style.display="none",o.name=r,o.src=t;const i=new Promise((e=>o.onload=e)),s=e.document.body||e.document.head;s.appendChild(o),i.then((()=>{o.onload=null,s.removeChild(o)}))},x="ERROR",P="WARNING";class k extends Error{constructor(e){var t,n;super(e.code),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.message=e.message||e.code||"",this.code=e.code,this.additionalInformation=e.additionalInformation,this.handled=null!==(n=e.handled)&&void 0!==n&&n,this.severity=e.severity||x,this.integration=e.integration,this.reporter=e.reporter,e.stack&&(this.stack=e.stack)}}const D="ROKT_LOCALSTORAGE_FAILED",M={code:"UNKNOWN_ERROR",severity:x};function U(e,t={}){const n=Object.assign(Object.assign({},M),t);if((r=e)&&"object"==typeof r){const t=e;t.name&&(n.name=t.name),t.message&&(n.message=t.message),t.stack&&(n.stack=t.stack),t.code&&(n.code=t.code),t.reporter&&(n.reporter=t.reporter),t.integration&&(n.integration=t.integration),t.severity&&(n.severity=t.severity),void 0!==t.handled&&(n.handled=t.handled),t.additionalInformation&&(n.additionalInformation=Object.assign(Object.assign({},n.additionalInformation),t.additionalInformation))}var r;return new k(n)}function j(e){return function(e,t){try{return["Rokt","rtid"].flatMap((e=>Object.keys(localStorage).filter((t=>t.startsWith(e))))).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:localStorage.getItem(t)})),{})}catch(e){t(U(e,{code:D,severity:P}))}return{}}(["Rokt","rtid"],e)}const F=Symbol.for("RemoteUi::Retain"),W=Symbol.for("RemoteUi::Release"),$=Symbol.for("RemoteUi::RetainedBy");class B{constructor(){this.memoryManaged=new Set}add(e){this.memoryManaged.add(e),e[$].add(this),e[F]()}release(){for(const e of this.memoryManaged)e[$].delete(this),e[W]();this.memoryManaged.clear()}}function G(e){return Boolean(e&&e[F]&&e[W])}function V(e,t,n){const r=n.get(e);if(null!=r)return r;const o=G(e);if(o&&e[F](),n.set(e,o),t){if(Array.isArray(e)){const r=e.reduce(((e,r)=>V(r,t,n)||e),o);return n.set(e,r),r}if(H(e)){const r=Object.keys(e).reduce(((r,o)=>V(e[o],t,n)||r),o);return n.set(e,r),r}}return n.set(e,o),o}function Y(e,t,n){const r=n.get(e);if(null!=r)return r;const o=G(e);if(o&&e[W](),n.set(e,o),t){if(Array.isArray(e)){const r=e.reduce(((e,r)=>Y(r,t,n)||e),o);return n.set(e,r),r}if(H(e)){const r=Object.keys(e).reduce(((r,o)=>Y(e[o],t,n)||r),o);return n.set(e,r),r}}return o}function H(e){if(null==e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}function Z(e,t){const n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError(`${t[0].toUpperCase()+t.slice(1)} must be a function or undefined`)}const K="_@f";function X(e){const t=new Map,n=new Map,r=new Map;return{encode:function r(o,i=new Map){if(null==o)return[o];const s=i.get(o);if(s)return s;if("object"==typeof o){if(Array.isArray(o)){i.set(o,[void 0]);const e=[],t=[o.map((t=>{const[n,o=[]]=r(t,i);return e.push(...o),n})),e];return i.set(o,t),t}if(H(o)){i.set(o,[void 0]);const e=[],t=[Object.keys(o).reduce(((t,n)=>{const[s,a=[]]=r(o[n],i);return e.push(...a),Object.assign(Object.assign({},t),{[n]:s})}),{}),e];return i.set(o,t),t}}if("function"==typeof o){if(t.has(o)){const e=t.get(o),n=[{[K]:e}];return i.set(o,n),n}const r=e.uuid();t.set(o,r),n.set(r,o);const s=[{[K]:r}];return i.set(o,s),s}const a=[o];return i.set(o,a),a},decode:o,async call(e,t){const r=new B,i=n.get(e);if(null==i)throw new Error("You attempted to call a function that was already released.");try{const e=G(i)?[r,...i[$]]:[r];return await i(...o(t,e))}finally{r.release()}},release(e){const r=n.get(e);r&&(n.delete(e),t.delete(r))},terminate(){t.clear(),n.clear(),r.clear()}};function o(t,n){if("object"==typeof t){if(null==t)return t;if(Array.isArray(t))return t.map((e=>o(e,n)));if(K in t){const o=t[K];if(r.has(o))return r.get(o);let i=0,s=!1;const a=()=>{i-=1,0===i&&(s=!0,r.delete(o),e.release(o))},c=()=>{i+=1},l=new Set(n),d=(...t)=>{if(s)throw new Error("You attempted to call a function that was already released.");if(!r.has(o))throw new Error("You attempted to call a function that was already revoked.");return e.call(o,t)};!function(e,t){if(!("Zone"in window))return Object.defineProperties(e,t);if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.defineProperties called on non-object");if(!Object.isExtensible(e))throw new TypeError("Cannot define properties on a non-extensible object");[...Object.keys(t),...Object.getOwnPropertySymbols(t)].forEach((n=>{const r=t[n];if(!r||"object"!=typeof r)throw new TypeError("Property descriptor must be an object: "+r);if(Z(r,"get"),Z(r,"set"),("get"in r||"set"in r)&&("value"in r||"writable"in r))throw new TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");Object.defineProperty(e,n,r)}))}(d,{[W]:{value:a,writable:!1},[F]:{value:c,writable:!1},[$]:{value:l,writable:!1}});for(const e of l)e.add(d);return r.set(o,d),d}if(H(t))return Object.keys(t).reduce(((e,r)=>Object.assign(Object.assign({},e),{[r]:o(t[r],n)})),{})}return t}}function q(){return`${z()}-${z()}-${z()}-${z()}`}function z(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}class J{constructor(){this.fulfilled=!1,this.rejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})).then((e=>(this.fulfilled=!0,e)),(e=>{throw this.rejected=!0,e}))}isFulfilled(){return this.fulfilled}isPending(){return!this.isFulfilled()&&!this.isRejected()}isRejected(){return this.rejected}static resolve(e){const t=new J;return t.resolve(e),t}}const Q="CORE::PORT_EXCHANGE",ee="CORE::READY",te="CORE::WAITING_FOR_PORT";var ne,re;!function(e){e[e.WAITING=0]="WAITING",e[e.CONNECTING=1]="CONNECTING",e[e.TRANSFERRING=2]="TRANSFERRING",e[e.CONNECTED=3]="CONNECTED",e[e.READY=4]="READY",e[e.FAILED_UNDEFINED_SOURCE=5]="FAILED_UNDEFINED_SOURCE"}(ne||(ne={})),function(e){e.Controller="Controller",e.Extension="Extension",e.Launcher="Launcher",e.Plugin="Plugin"}(re||(re={}));class oe extends Error{constructor(e){super(e.message||e.code),this.code=e.code,this.sourceType=e.sourceType,this.sourceName=e.sourceName,e.stack&&(this.stack=e.stack)}}const ie={CONTROLLER_ALREADY_EXISTS:"CONTROLLER_ALREADY_EXISTS",STORAGE_ACCESS_ERROR:"STORAGE_ACCESS_ERROR",FAILED_CONTROLLER_REMOVE:"FAILED_CONTROLLER_REMOVE"},se={PLUGIN_IFRAME_NOT_FOUND:"IFRAME_NOT_FOUND",SELECTOR_NOT_FOUND:"SELECTOR_NOT_FOUND",SANDBOX_ATTRIBUTES_ALREADY_SET:"SANDBOX_ATTRIBUTES_ALREADY_SET",PLUGIN_ALREADY_APPENDED:"PLUGIN_ALREADY_APPENDED",SELECTOR_ELEMENT_NOT_FOUND:"SELECTOR_ELEMENT_NOT_FOUND"};class ae{constructor(){this.t=[]}add(e){this.t.push(e)}unsubscribe(){this.t.forEach((e=>e.unsubscribe()))}}const ce=()=>{},le=(e=ce,t=ce,n=ce)=>"function"!=typeof e?e:{next:e,error:t,complete:n};class de{constructor(e){this.o=e}subscribe(e,t,n){const r=le(e,t,n);let o,i=!0;const s={next:e=>{i&&r.next(e)},complete:()=>{i&&(o&&o(),r.complete(),i=!1)},error:e=>{i&&(r.error(e),i=!1)}};o=this.o(s),i||o&&o();const a=new ae;return a.add({unsubscribe:()=>{o&&o(),i=!1}}),a}}class ue extends de{constructor(){super((e=>(this.i&&e.complete(),this.u.push(e),()=>this.u=this.u.filter((t=>t!==e))))),this.u=[],this.i=!1}next(e){for(const t of this.u)t.next(e)}error(e){for(const t of this.u)t.error(e)}complete(){this.i=!0;for(const e of this.u)e.complete()}asObservable(){return new de((e=>{const t=this.subscribe(e);return()=>t.unsubscribe()}))}}var fe,me,pe,he=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Ee=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class we{constructor(e,t){fe.set(this,new ue),me.set(this,void 0),pe.set(this,void 0),he(this,me,e,"f"),he(this,pe,t,"f")}throw(e,t="",n){throw new oe({code:e,stack:n,message:t,sourceType:Ee(this,me,"f"),sourceName:Ee(this,pe,"f")})}onError(){return Ee(this,fe,"f").asObservable()}reportError(e){const t=Object.assign({message:e.message,stack:e.stack},e);Ee(this,fe,"f").next(t)}createCoreError(e,t="",n){return new oe({code:e,stack:n,message:t||e,sourceType:Ee(this,me,"f"),sourceName:Ee(this,pe,"f")})}}function Oe(e){return Array.isArray(e)}fe=new WeakMap,me=new WeakMap,pe=new WeakMap;class ye{qualifier(e){return null!=e&&"object"==typeof e&&"$rpc"in e}handler(e){switch(e.$rpc){case"HtmlElement":return function(e){return document.querySelector(e.selector)}(e);case"PromiseProperty":return function(e){return e.getValue()}(e);case"Subscriber":return t=e,(...e)=>{const n=new ue,r=t.getSubscriber(...e).then((e=>e.subscribe({next:e=>n.next(e),error:e=>n.error(e),complete:()=>n.complete()})));return{subscribe:(e,t,o)=>{const i=le(e,t,o),s=n.subscribe(i);return{unsubscribe:()=>{s.unsubscribe(),r.then((({unsubscribe:e})=>e()))}}}}};case"Listener":return function(e){return async(t,n)=>await e.setEventListener({eventName:t,callback:async(...e)=>await n(...e)})}(e)}var t}}const ge=e=>e.document.querySelector('[data-core-type="controller"]'),ve=new RegExp(/(Mac OS X)/),Ie=(e,t,n)=>{const r=e.document.createElement("iframe");r.style.display="none",r.setAttribute("id","rokt-controller-frame"),r.setAttribute("data-core-type","controller"),r.setAttribute("aria-hidden","true"),ve.test((()=>{if("undefined"==typeof window)throw new Error("NO_WINDOW");return window})().navigator.userAgent)||r.sandbox.add("allow-scripts","allow-same-origin"),r.src=`${t}/controller/index.html`,r.name=n;const o=new Promise((e=>r.onload=()=>e()));return(e.document.body||e.document.head).appendChild(r),o},be=(e=0)=>new Promise((t=>setTimeout(t,e)));var Ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function _e(e,t=3,n=100,r=(()=>!0)){return Ne(this,void 0,void 0,(function*(){try{return yield e()}catch(e){if(t<=1||!r(e))throw e}return yield be(1*n),yield _e(e,t-1,n)}))}class Te{constructor(e){this.value=e,this.complete=!1,this.skip=!1}}const Re=(e,t,n)=>{const r=new MutationObserver((e=>{for(const o of e)"childList"===o.type&&Se(Array.from(o.removedNodes),t)&&(n(),r.disconnect())}));return r.observe(e.document.body,{attributes:!0,childList:!0,subtree:!0}),()=>r.disconnect()},Se=(e,t)=>{for(const n of e){if(n===t)return!0;if(n.childNodes.length&&Se(Array.from(n.childNodes),t))return!0}return!1};class Ae{constructor(e,t,n,r,o,i){this.l=e,this.element=t,this.id=n,this.name=r,this.h=o,this.p=i,this.m=!1,this.events$=new ue}on(e){return(r=this.events$,(...e)=>new de((t=>{const n=r.subscribe((n=>function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function o(e){try{s(r.next(e))}catch(e){t(e)}}function i(e){try{s(r.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,i)}s((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function*(){try{let r=new Te(n);for(const t of e){const e=t(r);if(r=e.then?yield e:e,!0===r.skip||!0===r.complete)break}if(r.skip)return;t.next(r.value),!0===r.complete&&t.complete()}catch(e){t.error(e)}}))),(e=>t.error(e)),(()=>t.complete()));return()=>n.unsubscribe()})))((n=t=>t.eventName===e,e=>(!1===n(e.value)&&(e.skip=!0),e)),(t=e=>e.data,e=>{const n=t(e.value);return new Te(n)}));var t,n,r}async send(e,t){this.h.sendMessage(e,t)}async putConfig(e){await this.h.putConfig(e)}async appendToElement(e,t="beforeend"){this.m&&this.p.throw(se.PLUGIN_ALREADY_APPENDED);const n=new Promise((e=>this.element.onload=()=>e()));e.insertAdjacentElement(t,this.element),this.m=!0,await n,await this.h.onAppended()}async appendToSelector(e,t="beforeend"){try{const n=await _e((()=>Promise.resolve(((e,t="")=>{const n=(r=t)?r.replace(/([\#\.])([0-9])/gi,"$1\\3$2 "):r;var r;if(!n)return e.document.body;const o=e.document.querySelector(n);if(!o)throw new Error(`Target element with selector ${n} not found`);return o})(this.l,e))),100,100);await this.appendToElement(n,t)}catch(e){this.p.throw(se.SELECTOR_ELEMENT_NOT_FOUND,e.message,e.stack)}}async close(){var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)}}const Le=e=>{const t=e.document.createElement("iframe");return t.style.display="none",t.title="Rokt placement",t.style.width="100%",t.setAttribute("data-core-type","plugin"),t},Ce=(e,t)=>`${e}/plugins/${t}/index.html`;class xe extends Map{async clear(){const e=[];for(const t of this.values())e.push(t.close());await Promise.all(e),super.clear()}}function Pe(e,t,n,r,o){const i=t.replace("wsdk2","wsdk");return async function(t){const{id:s,name:a,controllerRPCPlugin:c,register:l,e2eId:d}=t,u=Le(e);u.id=s,u.name=s,u.src=Ce(i,a),u.setAttribute("data-e2e-id",d),u.sandbox.add("allow-scripts","allow-same-origin","allow-popups","allow-forms","allow-top-navigation","allow-popups-to-escape-sandbox");const f=new Ae(e,u,s,a,c,r);l&&n.set(s,f);const m=o(f,u,r);return function(e,{deep:t=!0}={}){V(e,t,new Map)}(c),Re(e,u,(async()=>{await c.close(),function(e,{deep:t=!0}={}){Y(e,t,new Map)}(c)})),m}}function ke(e,t,n){let r=!1;return{async appendTo(t,n){await e.appendToSelector(t,n)},async clearStyles(){t.removeAttribute("style")},async sendMessage(t,n){e.events$.next({eventName:t,data:n})},async setSandbox(e){r?n.throw(se.SANDBOX_ATTRIBUTES_ALREADY_SET):t.sandbox.add(...e),r=!0},async setTitle(e){t.title=e},async setStyles(e){for(const[n,r]of Object.entries(e))t.style[n]=r},async close(){await e.close()}}}const De=new RegExp("^[rR]okt");function Me(e){return!!e.match(De)}const Ue=2;function je(e=window.document){return{get:async t=>async function(e,t){const n=e.match(function(e){return new RegExp("(^| )"+e+"=([^;]+)")}(t));return Me(t)&&n&&n[Ue]?n[Ue]:void 0}(e.cookie,t).then((e=>e)).catch((()=>{})),async set(t){e.cookie=t}}}function Fe(e,t,n){let r;try{r=e[t]}catch(e){const r=n.createCoreError(ie.STORAGE_ACCESS_ERROR,`Could not access partner storage: ${t}`);n.reportError(r)}return{getItem:async e=>r&&Me(e)&&r.getItem(e)||"",async setItem(e,t){r&&Me(e)&&r.setItem(e,t)},async removeItem(e){r&&Me(e)&&r.removeItem(e)},async clear(){r&&r.clear()}}}function We(e){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}(e)?parseInt(e,10):0}const $e=(...e)=>({points:e}),Be=e=>{let t;return async n=>{const r=e.document.querySelector(n);if(r&&!t&&""!==t){t=e.document.body.style.overflow,e.document.body.style.overflow="hidden";const n=new e.MutationObserver((()=>{e.document.contains(r)||(e.document.body.style.overflow=t,n.disconnect())}));n.observe(e.document,{childList:!0,subtree:!0})}}};class Ge{constructor(e,t,n,r){this.connection=e,this.O=t,this.g=n,this.v=r}async createPlugin({name:e,e2eId:t,config:n}){const r=await this.O.createPlugin(e,n,null!=t?t:"");return this.g.get(r)}getPlugins(){return this.g}async getLauncherExtension(...e){return this.O.getLauncherExtension(...e)}async useExtension(e){return this.O.useExtension(e)}onTerminate(){return this.v.promise}}async function Ve(e){return async function({integrationUrl:e,windowRef:t=window,controllerFrameName:n}){const r=new we(re.Launcher),o=new J;ge(t)&&r.throw(ie.CONTROLLER_ALREADY_EXISTS);const{origin:i}=new t.URL(e),s=function(e,t){const{port1:n,port2:r}=new e.MessageChannel;e.addEventListener("message",(function i(c){a(c,te)&&(s.status=ne.TRANSFERRING,e.removeEventListener("message",i),c.source?(o.resolve(c.source),c.source.postMessage(Q,{targetOrigin:t,transfer:[r]}),n.start(),s.status=ne.CONNECTED):s.status=ne.FAILED_UNDEFINED_SOURCE)})),e.addEventListener("message",(function t(n){a(n,ee)&&(e.removeEventListener("message",t),i.resolve(),s.status=ne.READY)}));const o=new J,i=new J,s=Object.assign(Object.assign({},function(e){return{postMessage:(...t)=>e.postMessage(...t),addEventListener:(...t)=>e.addEventListener(...t),removeEventListener:(...t)=>e.removeEventListener(...t),terminate(){e.close()}}}(n)),{status:ne.WAITING,onReady:()=>i.promise,ready:async()=>{(await o.promise).postMessage(ee,{targetOrigin:t})}});return s;function a(e,n){return e&&"string"==typeof e.data&&e.data===n&&e.origin===t}}(t,i);try{const i=new xe,a=Ie(t,e,null!=n?n:"uninitialized");await a;const c=function(e,{uuid:t=q,createEncoder:n=X,callable:r}={}){let o=!1,i=e;const s=new Map,a=new Map,c=function(e,t){let n;if(null==t){if("function"!=typeof Proxy)throw new Error("You must pass an array of callable methods in environments without Proxies.");const t=new Map;n=new Proxy({},{get(n,r){if(t.has(r))return t.get(r);const o=e(r);return t.set(r,o),o}})}else{n={};for(const r of t)Object.defineProperty(n,r,{value:e(r),writable:!1,configurable:!0,enumerable:!0})}return n}(f,r),l=n({uuid:t,release(e){d(3,[e])},call(e,n,r){const o=t(),i=m(o,r),[s,a]=l.encode(n);return d(5,[o,e,s],a),i}});return i.addEventListener("message",u),{call:c,replace(e){const t=i;i=e,t.removeEventListener("message",u),e.addEventListener("message",u)},expose(e){for(const t of Object.keys(e)){const n=e[t];"function"==typeof n?s.set(t,n):s.delete(t)}},callable(...e){if(null!=r)for(const t of e)Object.defineProperty(c,t,{value:f(t),writable:!1,configurable:!0,enumerable:!0})},terminate(){d(2,void 0),p(),i.terminate&&i.terminate()}};function d(e,t,n){o||i.postMessage(t?[e,t]:[e],n)}async function u(e){const{data:t}=e;var n;if(n=t,Array.isArray(n)&&"number"==typeof n[0]&&(null==n[1]||Array.isArray(n[1])))switch(t[0]){case 2:p();break;case 0:{const n=new B,[r,o,i]=t[1],a=s.get(o);try{if(null==a)throw new Error(`No '${o}' method is exposed on this endpoint`);const[e,t]=l.encode(await a(...l.decode(i,[n])));d(1,[r,void 0,e],t)}catch(e){const{name:t,message:n,stack:o}=e;throw d(1,[r,{name:t,message:n,stack:o}]),e}finally{n.release()}break}case 1:{const[e]=t[1];a.get(e)(...t[1]),a.delete(e);break}case 3:{const[e]=t[1];l.release(e);break}case 6:{const[e]=t[1];a.get(e)(...t[1]),a.delete(e);break}case 5:{const[e,n,r]=t[1];try{const t=await l.call(n,r),[o,i]=l.encode(t);d(6,[e,void 0,o],i)}catch(t){const{name:n,message:r,stack:o}=t;throw d(6,[e,{name:n,message:r,stack:o}]),t}break}}}function f(e){return(...n)=>{if(o)return Promise.reject(new Error("You attempted to call a function on a terminated web worker."));if("string"!=typeof e&&"number"!=typeof e)return Promise.reject(new Error(`Can’t call a symbol method on a remote endpoint: ${e.toString()}`));const r=t(),i=m(r),[s,a]=l.encode(n);return d(0,[r,e,s],a),i}}function m(e,t){return new Promise(((n,r)=>{a.set(e,((e,o,i)=>{if(null==o)n(i&&l.decode(i,t));else{const e=new Error;Object.assign(e,o),r(e)}}))}))}function p(){var e;o=!0,s.clear(),a.clear(),null===(e=l.terminate)||void 0===e||e.call(l),i.removeEventListener("message",u)}}(s),l=function({qualifier:e,handler:t}){return function n(r){return o=r,Object(o)!==o?r:Oe(r)?r.map((e=>n(e))):new Proxy(r,{get(r,o){const i=r[o];return e(i)?t(i):function(e){return null!==e&&"object"==typeof e&&!Oe(e)}(i)?n(i):function(e){return"function"==typeof e}(i)?(...e)=>{const t=i(...e);return function(e){return e instanceof Promise}(t)?t.then((e=>n(e))):n(t)}:i}});var o}}(new ye)(c.call);s.ready();const d=Array();d.push(r.onError().subscribe((e=>{l.reportError(e)})));const u=function(e,t,n,r,o,i,s,a){return{createPlugin:Pe(e,t,n,r,ke),getWindow:()=>function(e,t){return new Promise((n=>{var r;n({localStorage:Fe(e,"localStorage",t),sessionStorage:Fe(e,"sessionStorage",t),location:(r=e.location,{getHref:async()=>r.href,getHostname:async()=>r.hostname}),cookies:je()})}))}(e,r),getHighestZIndex:()=>Promise.resolve(function(){const e=document.body.querySelectorAll("*");return Array.from(e).filter((e=>e&&e.nodeType===Node.ELEMENT_NODE)).reduce(((e,t)=>{const n=We(document.defaultView.getComputedStyle(t).getPropertyValue("z-index")),r=We(t.style&&t.style.zIndex);return Math.max(e,n,r)}),0)}()),getElementBoundingRect:t=>async function(e,t){var n;return null===(n=t.document.getElementById(e))||void 0===n?void 0:n.getBoundingClientRect()}(t,e),getElementCoverage:(t,n)=>async function(e,t,n){const r=n.document.getElementById(e);if(!r)return $e();const{points:o}=t,i=o.filter((({x:e,y:t})=>n.document.elementFromPoint(e,t)!==r));return $e(...i)}(t,n,e),setFullscreen:Be(e),terminate:async()=>{a.forEach((e=>{e.unsubscribe()})),s.resolve(),await n.clear(),await be(0),await i(),setTimeout((()=>o.terminate()),0)}}}(t,e,i,r,c,((e,t)=>async()=>{const n=ge(e);if(!n)return;n.remove();const r=t.createCoreError(ie.FAILED_CONTROLLER_REMOVE,"Could not remove controller from the DOM");return _e((async function(){if(ge(e))throw r}),5,50).catch((()=>{t.reportError(r)}))})(t,r),o,d);return c.expose(u),new Ge(s,l,i,o)}catch(e){throw e.message=`${e.message}; Connection status ${s.status}`,e}}({integrationUrl:`${I().ROKT_COM_URL}/wsdk2`,windowRef:window,controllerFrameName:e})}const Ye={NO_OPTIONS:"Please provide an options object",NO_ACCOUNT_ID:"Please provide your account id",SECOND_INSTANCE:"Integration Launcher already created",BROWSER_NOT_SUPPORTED:"Client browser is not supported"},He=`IL-${function(){let e;return void 0==={VERSION:"3.15.4"}?(e={VERSION:"",DEBUG:"false"},e):{VERSION:"3.15.4"}}().VERSION}`,Ze="integration-launcher",Ke="__rokt_cl__",Xe="__rokt_il__",qe="__rokt_ac_id__",ze="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{return(("y"===e?8:0)^(t=new Uint8Array(1),(window.crypto||window.msCrypto).getRandomValues(t))[0]&15>>("y"===e?2:0)).toString(16);var t}));function Je(e){return new Proxy(e,{get:(e,t)=>"selectPlacements"===t||"captureConversion"===t?(...n)=>(n[0]=n[0]||{},n[0].url=window.location.href,e[t](...n)):e[t]})}var Qe=n(879);const et=Date.now(),tt=function({window:e,integrationStart:t=Date.now(),reportErrorFrame:n}){Promise.race([i(e,ze),new Promise((e=>setTimeout((()=>e(!1)),13e3)))]).then((e=>{if(!e){const e=s();n(new g({code:E.CORE_LAUNCHER_TIMEOUT,additionalInformation:{controllerFrameName:ze,DEFAULT_VERSION:He,iframeFound:e,integration:Ze},severity:O}))}})).catch((e=>{}));const r=Date.now();return async function(e){const t=C(e),n=[_.Widget,_.DCUI];await Promise.all(n.map(t))}(e),{createLauncher:async function(a){var c,l,d;const u=Date.now(),f=a,v=null!==(c=null==f?void 0:f.integrationName)&&void 0!==c?c:Ze,I=m();(function(e){switch(null==e?void 0:e.name){case"chrome":return parseFloat(null==e?void 0:e.version)>=52;case"safari":case"ios":return parseFloat(null==e?void 0:e.version)>=13;case"ios-webview":return parseFloat(null==e?void 0:e.version)>=604;case"edge-chromium":return parseFloat(null==e?void 0:e.version)>=90;default:return!0}})(I)||o("BROWSER_NOT_SUPPORTED",y,v,{browserName:null!==(l=null==I?void 0:I.name)&&void 0!==l?l:"",browserVersion:null!==(d=null==I?void 0:I.version)&&void 0!==d?d:""}),f||o("NO_OPTIONS",y),f.accountId||o("NO_ACCOUNT_ID",y,v),e[qe]&&f.accountId!==e[qe]&&o("SECOND_INSTANCE",y,v,{accountId:f.accountId}),async function(e,t){const n=C(e),r=t.split("_")[0],o=e.location.href;A.has(r)&&L.some((e=>o.includes(e)))&&await Promise.all([_.OL14,_.OL16].map(n))}(e,a.accountId),e[qe]=f.accountId;const b=f.integrationVersion||He;try{return await async function(e,o,a,c,l,d,u){var f,m,w,v;if(e[Xe]&&(null===(m=null===(f=e[Xe])||void 0===f?void 0:f.isFulfilled)||void 0===m?void 0:m.call(f)))return e[Xe].promise;(null===(v=null===(w=e[Xe])||void 0===w?void 0:w.isPending)||void 0===v?void 0:v.call(w))||(e[Xe]=new p);const I=function(e,t,n){return n&&n.getTime&&n.getTime()<t?n.getTime():e.performance.timeOrigin||e.performance.timing.navigationStart}(e,t,u);I||n(new g({code:"PAGE_START_NOT_FOUND",severity:y,additionalInformation:{pageInitTimestamp:u,integrationStart:t,timeOrigin:e.performance.timeOrigin},message:"PAGE_START_NOT_FOUND",integration:c}));const b=await i(e,o);await async function(e,t,r,o){if(await Promise.race([e.connection.onReady().then((()=>!0)),h(13e3).then((()=>!1))]))return;const i=s(),a=new g({code:E.CONTROLLER_INITIALIZATION,additionalInformation:{status:e.connection.status,controllerFrameName:r,version:t,iframeFound:i},integration:o});throw e.connection.onReady().then((()=>{const i=s();n({additionalInformation:{status:e.connection.status,controllerFrameName:r,iframeFound:i,version:t},code:E.LATE_CONTROLLER_INITIALIZATION,integration:o,message:E.LATE_CONTROLLER_INITIALIZATION,name:E.LATE_CONTROLLER_INITIALIZATION,reporter:"WSDK",severity:O,tagId:""})})),a}(b,a,o,c);const N=b.getLauncherExtension({pageStart:I,frameworkStart:l,integrationStart:t,integrationEnd:r,version:a,integration:c,accountId:d.accountId,noDeviceId:d.noDeviceId,noFunctional:d.noFunctional,noTargeting:d.noTargeting,doNotShareOrSell:d.doNotShareOrSell,sandbox:d.sandbox,sessionId:d.sessionId,customHeaders:d.customHeaders,roktCookies:(_=n,function(e,t){try{return document.cookie.split(";").filter((e=>e.trim().startsWith("Rokt"))).reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n.trim()]:r.trim()})}),{})}catch(e){t(U(e))}return{}}("Rokt",_)),roktLocalStorage:j(n)}).then((e=>e.public)).then((e=>Je(e)));var _;return e[Xe].resolve(N),N}(e,ze,b,v,u,f,a.pageInitTimestamp)}catch(t){throw e[Ke]=void 0,e[Xe]=void 0,n({additionalInformation:Object.assign(Object.assign({},t.additionalInformation),{controllerFrameName:ze,version:b}),code:t.code||E.INITIALIZATION_ERROR,integration:v,message:t.message,name:t.name,reporter:t.reporter||"WSDK",severity:t.severity||w,stack:t.stack,tagId:"",handled:t.handled}),t}},__getActiveLauncher:function(){var t,n;return null!==(n=null===(t=e[Xe])||void 0===t?void 0:t.promise)&&void 0!==n?n:Promise.resolve(void 0)}};function o(e,t,r,o){const i=function(e,t={}){const n=Object.assign(Object.assign({},v),t);if((r=e)&&"object"==typeof r){const t=e;t.name&&(n.name=t.name),t.message&&(n.message=t.message),t.stack&&(n.stack=t.stack),t.code&&(n.code=t.code),t.reporter&&(n.reporter=t.reporter),t.integration&&(n.integration=t.integration),t.severity&&(n.severity=t.severity),void 0!==t.handled&&(n.handled=t.handled),t.additionalInformation&&(n.additionalInformation=Object.assign(Object.assign({},n.additionalInformation),t.additionalInformation))}var r;return new g(n)}({code:E[e],severity:t,message:Ye[e],integration:r,additionalInformation:o});throw n(i),i}function i(e,t){if(e[Ke])return e[Ke];const r=Ve(t);return r.then((t=>{t&&t.onTerminate().then((()=>{e[Xe]=void 0,e[Ke]=void 0,e[qe]=void 0}))})).catch((e=>{n(new g({code:E.CORE_LAUNCHER_INITIALIZATION,additionalInformation:{controllerFrameName:t,DEFAULT_VERSION:He},message:e.message}))})),e[Ke]=r,r}function s(){let t=!1;try{t=!!e.document.querySelector('[data-core-type="controller"]')}catch(e){}return t}}({window,integrationStart:et,reportErrorFrame:Qe.reportError})})(),window.Rokt=r.default})();