(async function(){const{sandbox,attributes,accountId,emailPositiveEngagement,pageIdentifier,hashRawEmail,noFunctional,noTargeting,eventListeners}=window.rokt_config;const locateScriptBySource=regex=>{const scripts=window.document.getElementsByTagName("script");const sources=Array.from(scripts);const searchResult=sources.find(source=>regex.test(source.src));return searchResult};const roktIntegrationScriptUrl=new RegExp("https://apps(-demo|.stage|)?.rokt.com/(wsdk/)?integrations/launcher.js");const launcherScript=locateScriptBySource(roktIntegrationScriptUrl);await new Promise(resolve=>{window.Rokt?resolve():launcherScript.addEventListener("load",()=>{resolve()})});window.roktLauncher=window.roktLauncher||await window.Rokt.createLauncher({accountId:accountId,sandbox:sandbox,noFunctional:noFunctional,noTargeting:noTargeting,integrationName:"google"});const{email,emailsha256}=attributes;if(hashRawEmail){if(email&&emailsha256&&!emailPositiveEngagement){console.warn("ROKT: Both raw and hashed email values were provided with the SHA-256 hashing option selected. Only the hashed value will be used for integration.")}else if(!emailsha256){const attributesToHash={email:email};const hashedAttributes=await window.roktLauncher.hashAttributes(attributesToHash);attributes.emailsha256=hashedAttributes.emailsha256}if(!emailPositiveEngagement)delete attributes.email}const selectRoktPlacements=async(attributes,identifier=pageIdentifier)=>{return identifier?window.roktLauncher.selectPlacements({identifier:identifier,attributes:attributes}):window.roktLauncher.selectPlacements({attributes:attributes})};if(emailPositiveEngagement||eventListeners){const{email,...rest}=attributes;const selection=await selectRoktPlacements(emailPositiveEngagement?rest:attributes);if(emailPositiveEngagement){selection.on("POSITIVE_ENGAGEMENT").subscribe(()=>{selection.setAttributes({email:email});selection.unsubscribe()})}if(eventListeners){for(let i=0;i<eventListeners.length;i++){let event=eventListeners[i];selection.on(event.roktEvent).subscribe(()=>{window.dataLayer.push({event:event.customName})})}}}else{const selection=selectRoktPlacements(attributes)}})();